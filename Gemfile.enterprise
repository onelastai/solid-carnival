# MongoDB Database Configuration
source 'https://rubygems.org'
git_source(:github) { |repo| "https://github.com/#{repo}.git" }

ruby "3.3.0"

# Core Rails gems
gem "rails", "~> 7.1.3", ">= 7.1.3.2"
gem "sprockets-rails", ">= 2.0.0"
gem "pg", "~> 1.1"
gem "puma", ">= 5.0"
gem "importmap-rails"
gem "turbo-rails"
gem "stimulus-rails"
gem "jbuilder"
gem "bootsnap", require: false
gem "sassc-rails", ">= 2.1.0"
gem "image_processing", "~> 1.2"

# =============================================================================
# MONGODB & DATABASE
# =============================================================================
gem 'mongoid', '~> 8.1'  # MongoDB ODM for Rails
gem 'bson_ext', '~> 1.5'  # BSON C extensions for performance
gem 'mongo_session_store', '~> 3.0'  # MongoDB session store

# =============================================================================
# ENTERPRISE AUTHENTICATION - PASSAGE (1PASSWORD)
# =============================================================================
gem 'passage-auth', '~> 1.0'  # Passage authentication
gem 'onepassword-sdk', '~> 0.1'  # 1Password SDK integration
gem 'webauthn', '~> 3.0'  # WebAuthn for passwordless auth
gem 'jwt', '~> 2.7'  # JSON Web Tokens

# =============================================================================
# ENTERPRISE PAYMENT PROCESSING
# =============================================================================
# Stripe Payment Gateway
gem 'stripe', '~> 10.0'
gem 'stripe_event', '~> 2.7'  # Stripe webhook handling

# PayPal Integration
gem 'paypal-sdk-rest', '~> 1.7'
gem 'paypal-checkout-sdk', '~> 1.0'

# Lemon Squeezy
gem 'lemonsqueezy', '~> 0.2'
gem 'faraday', '~> 2.7'  # HTTP client for API calls

# =============================================================================
# AI & MACHINE LEARNING APIs
# =============================================================================
# Core AI Services
gem 'ruby-openai', '~> 6.3'
gem 'anthropic', '~> 0.1'
gem 'google-cloud-ai_platform', '~> 1.0'
gem 'hugging-face', '~> 0.3'

# RunwayML Integration
gem 'runwayml-ruby', '~> 0.1'  # Custom gem for RunwayML API
gem 'net-http-persistent', '~> 4.0'  # Persistent HTTP connections

# Multimedia AI Services
gem 'elevenlabs', '~> 0.2'  # Voice synthesis
gem 'assemblyai', '~> 1.0'  # Speech recognition
gem 'stability-ai', '~> 0.1'  # Image generation
gem 'replicate', '~> 0.2'  # Replicate API

# =============================================================================
# AWS & CLOUD INFRASTRUCTURE
# =============================================================================
gem 'aws-sdk-s3', '~> 1.136'  # S3 file storage
gem 'aws-sdk-ec2', '~> 1.400'  # EC2 instance management
gem 'aws-sdk-autoscaling', '~> 1.90'  # Auto scaling groups
gem 'aws-sdk-elasticloadbalancingv2', '~> 1.90'  # Load balancers
gem 'aws-sdk-backup', '~> 1.50'  # AWS Backup service
gem 'aws-sdk-cloudwatch', '~> 1.70'  # CloudWatch monitoring

# =============================================================================
# PRODUCTION OPTIMIZATION
# =============================================================================
# Environment & Configuration
gem 'dotenv-rails', groups: [:development, :test]
gem 'config', '~> 4.2'  # Application configuration

# Background Jobs
gem 'sidekiq', '~> 7.2'
gem 'sidekiq-web'
gem 'redis', '~> 5.0'
gem 'hiredis', '~> 0.6'

# Caching & Performance
gem 'redis-rails', '~> 5.0'
gem 'rack-cache', '~> 1.13'
gem 'dalli', '~> 3.2'  # Memcached client

# API & Serialization
gem 'jsonapi-serializer', '~> 2.2'
gem 'multi_json', '~> 1.15'
gem 'oj', '~> 3.16'  # Fast JSON parser

# =============================================================================
# SECURITY & MONITORING
# =============================================================================
# Security
gem 'rack-cors', '~> 2.0'
gem 'rack-attack', '~> 6.7'
gem 'secure_headers', '~> 6.5'
gem 'brakeman', '~> 6.0', groups: [:development, :test]

# Monitoring & Error Tracking
gem 'sentry-ruby', '~> 5.14'
gem 'sentry-rails', '~> 5.14'
gem 'newrelic_rpm', '~> 9.5'
gem 'scout_apm', '~> 5.3'

# Logging
gem 'lograge', '~> 0.14'
gem 'amazing_print', '~> 1.5'

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================
group :development, :test do
  gem "debug", platforms: %i[ mri mingw x64_mingw ]
  gem 'rspec-rails', '~> 6.0'
  gem 'factory_bot_rails', '~> 6.4'
  gem 'faker', '~> 3.2'
  gem 'vcr', '~> 6.2'
  gem 'webmock', '~> 3.19'
  gem 'mongoid-rspec', '~> 4.1'  # MongoDB testing helpers
end

group :development do
  gem "web-console"
  gem 'listen', '~> 3.8'
  gem 'spring', '~> 4.1'
  gem 'spring-watcher-listen', '~> 2.1'
  gem 'annotate', '~> 3.2'
  gem 'bullet', '~> 7.1'  # N+1 query detection
end

# =============================================================================
# PRODUCTION ONLY
# =============================================================================
group :production do
  gem 'rack-timeout', '~> 0.6'
  gem 'rack-mini-profiler', '~> 3.0'
end